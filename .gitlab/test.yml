unit-tests-linux-amd64:
  extends: .linux-amd64-test-job-heavy
  stage: test
  script:
    - make test

property-tests-linux-amd64:
  extends: .linux-amd64-test-job-heavy
  stage: test
  script:
    - make test-property

unit-tests-miri-linux-amd64:
  extends: .linux-amd64-test-job-heavy
  stage: test
  script:
    - make test-miri

check-features-linux-amd64:
  extends: .linux-amd64-test-job-heavy
  stage: test
  script:
    - make check-features

unit-tests-linux-arm64:
  extends: .linux-arm64-test-job-heavy
  stage: test
  script:
    - make test

property-tests-linux-arm64:
  extends: .linux-arm64-test-job-heavy
  stage: test
  script:
    - make test-property

unit-tests-miri-linux-arm64:
  extends: .linux-arm64-test-job-heavy
  stage: test
  script:
    - make test-miri

check-features-linux-arm64:
  extends: .linux-arm64-test-job-heavy
  stage: test
  script:
    - make check-features

unit-tests-macos-amd64:
  extends: .macos-amd64-test-job
  stage: test
  script:
    - make test

unit-tests-miri-macos-amd64:
  extends: .macos-amd64-test-job
  stage: test
  script:
    - make test-miri

unit-tests-macos-arm64:
  extends: .macos-arm64-test-job
  stage: test
  script:
    - make test

unit-tests-miri-macos-arm64:
  extends: .macos-arm64-test-job
  stage: test
  script:
    - make test-miri

loom-tests:
  extends: .linux-arm64-test-job-heavy
  stage: test
  script:
    - make test-loom

check-clippy:
  extends: .linux-arm64-test-job-heavy
  stage: test
  script:
    - make check-clippy

check-deny:
  extends: .linux-arm64-test-job
  stage: test
  script:
    - make check-deny

check-fmt:
  extends: .linux-arm64-test-job
  stage: test
  script:
    - make check-fmt

check-licenses:
  extends: .linux-arm64-test-job
  stage: test
  script:
    - make check-licenses

check-protos:
  extends: .linux-arm64-test-job
  stage: test
  script:
    - make update-protos
    - git diff --exit-code || (echo "Protocol Buffers definitions not up-to-date. Run `make update-protos` locally and commit."; exit 1)

check-unused-deps:
  extends: .linux-arm64-test-job
  stage: test
  script:
    - make check-unused-deps
