# Using a fixed hostname is both required to avoid errors, and also will ensure consistent tags between DSD/ADP.
hostname: "correctness-testing"

# Dummy API key.
api_key: dummy-api-key-correctness-testing

# We have to specifically configure the health port to use.
health_port: 5555

# Point ourselves at the datadog-intake service.
dd_url: "http://datadog-intake:2049"

# Turn off UDP and listen on a UDS socket instead.
dogstatsd_port: 0
dogstatsd_socket: /airlock/metrics.sock

# Ensure origin detection is disabled since we can't support it with ADP in standalone mode.
dogstatsd_origin_detection: false

# Gauges can be processed out-of-order when multiple workers are used, while ADP does not use multiple workers, so ADP
# always ends up with the correct (last seen) value, while DSD might return the last seen value... or the value seen
# four updates ago, etc etc.
dogstatsd_workers_count: 1

# Enable V3 metrics encoding for all endpoints.
#
# We leave validation mode off since we want to focus on just the V3 metrics, and we don't yet have a way to separate
# the V3 metrics from the V2 metrics in order to emulate validation done on the backend.
serializer_experimental_use_v3_api:
  series:
    endpoints:
      - "http://datadog-intake:2049"
  sketches:
    endpoints:
      - "http://datadog-intake:2049"
